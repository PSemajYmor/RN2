<!DOCTYPE html>
<html>
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js"></script>
</head>
<body>
    <h1>Control Feed via MQTT</h1>
    <button id="onButton">On</button>
    <button id="offButton">Off</button>

    <script>
        const client = new Paho.MQTT.Client('io.adafruit.com', 8083, 'webpage-client');

        client.onConnectionLost = (responseObject) => {
            if (responseObject.errorCode !== 0) {
                console.log(`Connection lost: ${responseObject.errorMessage}`);
            }
        };

        client.connect({
            onSuccess: () => {
                console.log('Connected to Adafruit IO MQTT');
            }
        });

        document.getElementById('onButton').addEventListener('click', () => {
            client.publish('/P_Semaj_Ymor/feeds/bulb', '1');
        });

        document.getElementById('offButton').addEventListener('click', () => {
            client.publish('/P_Semaj_Ymor/feeds/bulb', '0');
        });
    </script>
</body>
</html>
